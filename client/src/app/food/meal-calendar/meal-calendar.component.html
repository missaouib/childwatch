<ng-template #customCellTemplate let-day="day">
  <div class="cal-cell-top" (mouseenter)="showAdd = day.date" (mouseleave)="showAdd = undefined">
	<span class="text-primary" *ngIf="afterStart(day.date) && showAdd === day.date" (click)="clickedDay({day: day})"><i class="text-success fa fa-plus"></i> Add</span>
    
    
    <span class="cal-day-number"><strong>{{ day.date | calendarDate:'monthViewDayNumber' }}</strong></span>
  </div>
  <div class="call-events" *ngFor="let event of day.events" >
  	<div class="chip bg-warning" [ngSwitch]="event.meta.meal.type" >
  		<img  *ngSwitchCase="'BREAKFAST'" src="/assets/img/meal/breakfast.svg" />
        <img *ngSwitchCase="'AM_SNACK'" src="/assets/img/meal/ante-meridiem.svg" />
        <img *ngSwitchCase="'LUNCH'" src="/assets/img/meal/lunch.svg" />
        <img *ngSwitchCase="'PM_SNACK'" src="/assets/img/meal/post-meridiem.svg" />
        <img *ngSwitchCase="'DINNER'" src="/assets/img/meal/turkey.svg" />
  		{{event.title}}
  		<div class="pull-right">
  			<a><i class="text-primary fa fa-pencil" (click)="editMeal(event.meta.meal)"></i></a>
  			<a><i class="text-danger fa fa-close" (click)="removeEvent(event.meta)"></i></a>
  		</div>
  	</div>
  </div>
</ng-template>

<div class="main-content">
	<span class="btn pull-right bg-primary circle" (click)="addMeal()"><i class="fa fa-plus"></i></span>
	<span class="pull-left btn-group" role="group">
		<button type="button" class="btn" (click)="gotoPreviousMonth()"><i class="fa fa-chevron-left"></i> {{previousMonth() | date: 'MMM' }}</button>
		<button type="button" class="btn" (click)="gotoToday()">Today</button>
		<button type="button" class="btn" (click)="gotoNextMonth()">{{nextMonth() | date: 'MMM'}} <i class="fa fa-chevron-right"></i></button>
	</span>
	<h3 class="text-center">
		{{ viewDate | date:'MMMM' }} <span *ngIf="differentYear()">{{viewDate | date:'yyyy'}}</span> 
	</h3>
	<br />
	<mwl-calendar-month-view
	    [viewDate]="viewDate"
	    [events]="events"
	    [activeDayIsOpen]="false"
	    [refresh]="refresh"
	    (eventTimesChanged)="eventDropped($event)"
	    (eventClicked)="eventClicked($event)"
		[cellTemplate]="customCellTemplate">
<!-- 		[excludeDays]="[0,6]"> -->
	</mwl-calendar-month-view>
</div>  		 	