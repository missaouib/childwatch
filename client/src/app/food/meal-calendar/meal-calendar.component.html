<ng-template #customCellTemplate let-day="day" >
<div dnd-droppable (onDropSuccess)="mealDropped( $event.dragData, day.date )" >
  <div class="cal-cell-top" (mouseenter)="showAdd = day.date" (mouseleave)="showAdd = undefined">
    <span class="cal-day-number"><strong>{{ day.date | calendarDate:'monthViewDayNumber' }}</strong></span>
  </div>
  <div class="call-events" *ngFor="let event of day.events" >
  	<div class="chip" [ngSwitch]="event.meta.meal.type">
				<img *ngSwitchCase="'BREAKFAST'" src="/assets/img/meal/breakfast.svg" />
				<img  *ngSwitchCase="'AM_SNACK'" src="/assets/img/meal/ante-meridiem.svg" />
				<img *ngSwitchCase="'LUNCH'" src="/assets/img/meal/lunch.svg" />
				<img *ngSwitchCase="'PM_SNACK'" src="/assets/img/meal/post-meridiem.svg" />
				<img *ngSwitchCase="'DINNER'" src="/assets/img/food/turkey.svg" />
  		<span tooltip="{{event.meta.meal.description}}">{{ limit( event.meta.meal.description, 10 )}}</span>
  		<div class="pull-right">
  			<a><i class="text-danger fa fa-close" (click)="removeEvent(event)"></i></a>
  		</div>
  	</div>
  </div>
</div>
</ng-template>


<div class="container-fluid">

	<div class="row">
	
		<!-- MENU -->
		<div class="col-sm-3 hidden-xs">
			<cw-meal-list (edit)="editMeal($event)" (add)="addMeal()"></cw-meal-list>
		</div>
		
		<!-- CALENDAR -->
		<div class="col-sm-9 col-xs-12">
			<span class="hidden-xs">
			<span class="pull-left btn-group" role="group">
				<button type="button" class="btn" (click)="gotoPreviousMonth()"><i class="fa fa-chevron-left"></i> {{previousMonth() | date: 'MMM' }}</button>
				<button type="button" class="btn" (click)="gotoToday()">Today</button>
				<button type="button" class="btn" (click)="gotoNextMonth()">{{nextMonth() | date: 'MMM'}} <i class="fa fa-chevron-right"></i></button>
			</span>
			<h3 class="text-center text-primary">
				{{ viewDate | date:'MMMM yyyy' }} 
			</h3>
			<span class="pull-right checkbox">
				<label><input [(ngModel)]="showWeekends" type="checkbox" (change)="flipWeekend($event)"> Show Weekends</label>
			</span>
			<br />
			<mwl-calendar-month-view
			    [viewDate]="viewDate"
			    [events]="eventList"
			    [activeDayIsOpen]="false"
			    [refresh]="refresh"
			    (dayClicked)="dayClicked($event)"
				[cellTemplate]="customCellTemplate"
				[excludeDays]="showHideWeekends">
			</mwl-calendar-month-view>
			</span>
			<div class="visible-xs">
				<cw-meal-day 
					(add)="addMeal()" 
					(edit)="editMeal($event)" 
					(remove)="removeEvent($event)"
					[day]="viewDate"></cw-meal-day>
			</div>

		</div>

	
	</div>
	

</div>  		 	